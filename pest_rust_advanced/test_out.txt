mtype = {};
typedef MessageType {
byte data1[20];
int data2;
byte data3[20];
bool data4;
};
typedef
MessageList {
MessageType m1;
MessageType m2;
MessageType m3;
};
chan mailbox[1] = [10] of { mtype, MessageList };

init {
chan p0_mailbox = [10] of { mtype, MessageList };
chan p1_mailbox = [10] of { mtype, MessageList };mailbox[0] = p0_mailbox;
int c_p;
c_p = run add();
mailbox[c_p] = p1_mailbox;
}

proctype add (chan ret) {
mailbox[0] = p0_mailbox;
}

